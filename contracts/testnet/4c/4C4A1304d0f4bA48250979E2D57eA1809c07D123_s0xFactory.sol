// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK0Okdlc:;,......    ......',;cldxO0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNXX0kdc;'...        .......         ...';coxOKXNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNX0xl;'..              .,;;:,.                ..;cdOXXNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXNXOo:'.                   .......                    ..;lkKXNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNXOo;..              .........................             ..,lkKNNNNXNNNNNNNNNNNNN
//      XNNNNNNNNNNNNXXNKx:..            ..........    'lc'.    ............            .;d0XNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNX0d;.          ........         .;dddkl.            .......          .'lOXNNNNNNNNNNNNN
//      XNNNNNNNNNNX0d,.         ......             .cx:..,lo'               ......         .'lOXNNNNNNNNNNN
//      XNNNNXNNNNKx,.         .....               .ox;.   .:o,.                 ....         .'o0XNNNNNNNNN
//      XNXNNNNNXOc.        .....                .,dd'      .;l;.                  .....   .... .;xXNNNNNNNN
//      XNNNNNNKd'....... .....                 .;xo.        .'c;.                    .....':;..  .l0XNNNNNN
//      XNNNNX0c. ..'''......                  .ckc.           .:;.                     ....',...  .;OXNNNNN
//      XNNNXO:.   ........                   .ok:.             .;;.                     ......     .,xXNNXX
//      XNNXO;.       ...                    'dx;.               .,;.                      ...        'xXNNN
//      XNXO;.       ...                   .,xx'       .....''''''';:..                     ...        'xXNN
//      XN0:.       ...                   .;kd.  ..,:ldxkOOOOOOOOOkO0Odl:,..                  ...      .,kXN
//      XKl.       ...                   .cko'':ok00Okdlc;;,'''...',;:dkxkkd:..                ..       .:0N
//      Xx'       ...                   .lKOxk00xxxl,.  ....',..      .'..,cddl,.              ...       .oX
//      O:.      ...                  ..dNN0xl;':c::c:'..':odol:..     .... ..:lc,.             ...       ,k
//      d.       ..                 .,o00d:.. .od'  .,cclxxl'.'coc.     ....   ..,,'..           ..       .l
//      :.      ...              ..:xKNO,.   .lO:    .;k0o;.   .'do.     ...      .....          ...       ,
//      '       ..             ..cddx0x'     .xO,   .:dc',:;'.   ;k:.           ..,'...           ..       .
//      .       ..            .:lc,ckd.      .dKc. .cl'.  ..,'. .lO:       ..':ll:,..             ...      .
//      .      ...          .,:,..ckl.       .;0O:,:,.      ...'lOl.   ..;ldkkdo;.                ...      .
//             ...        ..'.. .lkc.         .;kK0o,.......':dOx;..,cdOKKko;..'c:.               ...
//      .      ...       ....  .lk:.           .'coxOkkxxxxkkkxdodkKXXOdc'.    .'dd,.             ...
//      .      ...        ....,dk;.            ..  ..;coxkkOO0KXX0ko:'..         'dOc.            ...      .
//      .       ..          .,dd;,,;;:::;;;;;::clloxkO0KK00Oxdl;'..               .l0d'.          ...      .
//      ,.      ...        .;dc.  ...,;:clloodddddoolc:;'....                      .;OO:.         ......   .
//      c.  .......       .:o;.                                                     .'d0d'.      ....,;'. .:
//      x'  .';,...      .cl'.                                                        .:OO:.     ....;;.. .o
//      0l. ..,'....   .'ol...............................'''',,,,,,;;;:::::ccccclllllookNXd.   ... .... .;0
//      XO,       ...  .coc::cccccccccllllllllllllloooooooooooooooooooooooooooooooolllllllc;.  ...       .dX
//      XXd.       ...  .........................................                             ...       .lKN
//      XNKl.       ...            .:cccccc:;:ccccccc:::cccccccccccccccccccccccc'.           ...       .:0NX
//      XNNKc.       ...          .cXWNXXNKkxokXNWWNNK0NMWWNXNW0OXWNNWWNWWNWWNWWo.          ...       .;OXNN
//      XNNN0l.       ....        .cXNxokKxokllOkdxKNOxXWkloddOdlOXKkK0ONWOdx0WWo.         ...       .;OXNNN
//      XNNNNKo.        ...       .cXNOdokxcddd0klo0WKdOXd;lxkKOd0NWOlokKXOllOWWo.       ...        .c0NNNNN
//      XNNNNNXd'.       ....     .cXWK00XNKO0XXKNXKWN0KNNK00KNNK0XXOdOKKXKNXKNWo.     ....        .lKNNNNNN
//      XNNNNNNXO:.        ....    'oddddddddddddddddddddddddddddddl:coddddddddo;.   ....        .,xXNNNNNNN
//      XNNNNNNNNKd'.        .....                                                 ....        ..l0XNNNNNNNN
//      XNNNNNNNNNXOl..        ......                                           .....         .:kXNNNNNNNNNN
//      XNNNNNNNNNNNXOc..         ......                                    ......          .:xKNNNNNNNNNNNN
//      XNNNNNNNNNNNNNXOl'.          ........                          ........          ..ckKNNNNNNXNNNNNNN
//      XNNNNNNNNNNNNNNNX0d;..       ..'....................................',,.       .,oOXNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXOo;..    ...;;.     ....................      .;,'..   ..,lkKXNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNKOd:'.    ..                                 ...  ..;lkKXNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNX0ko:,...                                 ..':lx0XNNNNNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNNXKOxoc;,....                  ....';:ldOKXXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNXXNNNNXK0kdl:;'.....    .....',:ldk0KXNNNNNXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              s0xiety Factory                                                                                                                            //
//      @description    ::              Factory Constructor Contract                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Factory Constructor                                                                                                           //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

import "./s0xUsers.sol";
import {iii6Math, s0xFriends, iii6Relations} from "./s0xFriends.sol";
import "./s0xGroups.sol";

/**
 * @dev the s0xFactory creates the s0xial user friend and group interface and
 * functions as central administration hub for all s0xial interactions
 */
contract s0xFactory is s0xUsers, iii6Math, iii6Relations {
    s0xFriends public friends;
    s0xGroups public groups;
    address private fAdr;
    mapping(address => uint256) public groupCount;
    mapping(address => mapping(uint256 => address)) public groupByCount;
    mapping(address => uint256) public myGroupCount;
    mapping(address => mapping(uint256 => address)) public myGroupByCount;

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    constructor() s0xUsers() iii6Math() {
        friends = new s0xFriends(address(this));
        fAdr = address(friends);
    }

    function _getState(uint256 _state) internal pure returns (GroupType state) {
        if (_state == 0) state = GroupType.FaceToFace;
        else if (_state == 1) state = GroupType.Private;
        else if (_state == 2) state = GroupType.Closed;
        else if (_state == 3) state = GroupType.Shared;
        else if (_state == 4) state = GroupType.Public;
        else if (_state == 5) state = GroupType.Open;
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function _makeGroup(
        string memory _name,
        uint256 _state,
        string memory _p
    ) internal returns (address) {
        GroupType state;
        state = _getState(_state);

        groups = new s0xGroups(
            address(this),
            fAdr,
            bytes(_name),
            state,
            msg.sender,
            _p
        );
        groupByCount[msg.sender][groupCount[msg.sender]] = address(groups);
        groupCount[msg.sender]++;
        return address(groups);
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function _addUserToGroup(
        address _adr,
        address _group,
        string memory _p
    ) internal returns (address) {
        groups = s0xGroups(_group);
        groups.addUser(msg.sender, _adr, _p);
        groupByCount[_adr][groupCount[_adr]] = address(groups);
        groupCount[_adr]++;
        return _adr;
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function _delUserFromGroup(address _adr, address _group)
        internal
        returns (address)
    {
        groups = s0xGroups(_group);
        for (uint256 i = 0; i < groupCount[_adr]; i++) {
            if (groupByCount[_adr][i] == _group) {
                groupByCount[_adr][i] = address(0);
                groups.removeUser(msg.sender, _adr);
            }
        }
        groupCount[_adr]--;
        return _adr;
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function addUserToGroup(
        address _adr,
        address _group,
        string memory _p
    ) external returns (address) {
        return _addUserToGroup(_adr, _group, _p);
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function delUserFromGroup(address _adr, address _group)
        external
        returns (address)
    {
        return _delUserFromGroup(_adr, _group);
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function createGroup(
        string calldata _name,
        uint256 _state,
        string calldata _p,
        address[] calldata _usrs
    ) external returns (address) {
        address adr = _makeGroup(_name, _state, _p);
        for (uint256 i = 0; i < _usrs.length; i++) {
            _addUserToGroup(_usrs[i], adr, _p);
        }
        return adr;
    }

    /**
     * @dev the s0xFactory creates the s0xial user friend and group interface and
     * functions as central administration hub for all s0xial interactions
     * the constructor creates a friends instance and stores the address of the contract
     */
    function createConvo(string calldata _name, address _usr)
        external
        returns (address)
    {
        address adr = _makeGroup(_name, 0, "");
        address usr = _addUserToGroup(_usr, adr, "");
        return usr;
    }
}

// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK0Okdlc:;,......    ......',;cldxO0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNXX0kdc;'...        .......         ...';coxOKXNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNX0xl;'..              .,;;:,.                ..;cdOXXNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXNXOo:'.                   .......                    ..;lkKXNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNXOo;..              .........................             ..,lkKNNNNXNNNNNNNNNNNNN
//      XNNNNNNNNNNNNXXNKx:..            ..........    'lc'.    ............            .;d0XNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNX0d;.          ........         .;dddkl.            .......          .'lOXNNNNNNNNNNNNN
//      XNNNNNNNNNNX0d,.         ......             .cx:..,lo'               ......         .'lOXNNNNNNNNNNN
//      XNNNNXNNNNKx,.         .....               .ox;.   .:o,.                 ....         .'o0XNNNNNNNNN
//      XNXNNNNNXOc.        .....                .,dd'      .;l;.                  .....   .... .;xXNNNNNNNN
//      XNNNNNNKd'....... .....                 .;xo.        .'c;.                    .....':;..  .l0XNNNNNN
//      XNNNNX0c. ..'''......                  .ckc.           .:;.                     ....',...  .;OXNNNNN
//      XNNNXO:.   ........                   .ok:.             .;;.                     ......     .,xXNNXX
//      XNNXO;.       ...                    'dx;.               .,;.                      ...        'xXNNN
//      XNXO;.       ...                   .,xx'       .....''''''';:..                     ...        'xXNN
//      XN0:.       ...                   .;kd.  ..,:ldxkOOOOOOOOOkO0Odl:,..                  ...      .,kXN
//      XKl.       ...                   .cko'':ok00Okdlc;;,'''...',;:dkxkkd:..                ..       .:0N
//      Xx'       ...                   .lKOxk00xxxl,.  ....',..      .'..,cddl,.              ...       .oX
//      O:.      ...                  ..dNN0xl;':c::c:'..':odol:..     .... ..:lc,.             ...       ,k
//      d.       ..                 .,o00d:.. .od'  .,cclxxl'.'coc.     ....   ..,,'..           ..       .l
//      :.      ...              ..:xKNO,.   .lO:    .;k0o;.   .'do.     ...      .....          ...       ,
//      '       ..             ..cddx0x'     .xO,   .:dc',:;'.   ;k:.           ..,'...           ..       .
//      .       ..            .:lc,ckd.      .dKc. .cl'.  ..,'. .lO:       ..':ll:,..             ...      .
//      .      ...          .,:,..ckl.       .;0O:,:,.      ...'lOl.   ..;ldkkdo;.                ...      .
//             ...        ..'.. .lkc.         .;kK0o,.......':dOx;..,cdOKKko;..'c:.               ...
//      .      ...       ....  .lk:.           .'coxOkkxxxxkkkxdodkKXXOdc'.    .'dd,.             ...
//      .      ...        ....,dk;.            ..  ..;coxkkOO0KXX0ko:'..         'dOc.            ...      .
//      .       ..          .,dd;,,;;:::;;;;;::clloxkO0KK00Oxdl;'..               .l0d'.          ...      .
//      ,.      ...        .;dc.  ...,;:clloodddddoolc:;'....                      .;OO:.         ......   .
//      c.  .......       .:o;.                                                     .'d0d'.      ....,;'. .:
//      x'  .';,...      .cl'.                                                        .:OO:.     ....;;.. .o
//      0l. ..,'....   .'ol...............................'''',,,,,,;;;:::::ccccclllllookNXd.   ... .... .;0
//      XO,       ...  .coc::cccccccccllllllllllllloooooooooooooooooooooooooooooooolllllllc;.  ...       .dX
//      XXd.       ...  .........................................                             ...       .lKN
//      XNKl.       ...            .:cccccc:;:ccccccc:::cccccccccccccccccccccccc'.           ...       .:0NX
//      XNNKc.       ...          .cXWNXXNKkxokXNWWNNK0NMWWNXNW0OXWNNWWNWWNWWNWWo.          ...       .;OXNN
//      XNNN0l.       ....        .cXNxokKxokllOkdxKNOxXWkloddOdlOXKkK0ONWOdx0WWo.         ...       .;OXNNN
//      XNNNNKo.        ...       .cXNOdokxcddd0klo0WKdOXd;lxkKOd0NWOlokKXOllOWWo.       ...        .c0NNNNN
//      XNNNNNXd'.       ....     .cXWK00XNKO0XXKNXKWN0KNNK00KNNK0XXOdOKKXKNXKNWo.     ....        .lKNNNNNN
//      XNNNNNNXO:.        ....    'oddddddddddddddddddddddddddddddl:coddddddddo;.   ....        .,xXNNNNNNN
//      XNNNNNNNNKd'.        .....                                                 ....        ..l0XNNNNNNNN
//      XNNNNNNNNNXOl..        ......                                           .....         .:kXNNNNNNNNNN
//      XNNNNNNNNNNNXOc..         ......                                    ......          .:xKNNNNNNNNNNNN
//      XNNNNNNNNNNNNNXOl'.          ........                          ........          ..ckKNNNNNNXNNNNNNN
//      XNNNNNNNNNNNNNNNX0d;..       ..'....................................',,.       .,oOXNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXOo;..    ...;;.     ....................      .;,'..   ..,lkKXNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNKOd:'.    ..                                 ...  ..;lkKXNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNX0ko:,...                                 ..':lx0XNNNNNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNNXKOxoc;,....                  ....';:ldOKXXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNXXNNNNXK0kdl:;'.....    .....',:ldk0KXNNNNNXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              s0xiety Users                                                                                                                            //
//      @description    ::              User Catalog Contract                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Multinet User Catalog                                                                                                           //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

contract s0xUsers {
    // user data storage for conglomerate
    address private s0x; // s0x admin

    struct Impact {
        uint256 action;
        uint256 connection;
        uint256 liquidity;
    }
    // user profile array // user# => dias%
    mapping(address => bytes) public users;
    mapping(address => bool) public isUser;

    // role // user# => role$
    mapping(address => uint256) public roles;

    // only admin allowed function modifier
    mapping(address => Impact) public impx;
    mapping(address => string) public name;

    error Unauthorized();

    modifier isAdmin() {
        if (msg.sender != s0x) revert Unauthorized();
        _;
    }

    constructor() {
        s0x = msg.sender; // admin initialization
        makeUser(
            s0x,
            '{"name":"s0xAdmin","email":"[email protected]","image":"https://ipfs.io/ipfs/QmXNciGvGJGRV2HHE82oLoicvwatB8sqsydxn7P3NSP1nW"}',
            99,
            "s0xAdmin"
        ); // admin user account setup
    }

    // takes address , dias , and role to create and store a user profile in user mapping
    function makeUser(
        address _adr,
        bytes memory _dias,
        uint256 _r,
        string memory _name
    ) internal returns (bool) {
        users[_adr] = _dias;
        isUser[_adr] = true;
        roles[_adr] = _r;
        impx[_adr] = Impact(0, 0, 0);
        name[_adr] = _name;
        return true;
    }

    /// @notice takes dias to create guest user profile
    function createUserAccount(
        string memory _dias,
        address _user,
        string calldata _name
    ) external returns (bool) {
        return makeUser(_user, bytes(_dias), 2, _name); // role 2 is Affily8
    }

    // takes address , dias , and role to admin edit and store a user profile in user mapping
    function adminEditUser(
        address _adr,
        string memory _dias,
        uint256 _r
    ) external isAdmin returns (bool) {
        string memory _name = name[_adr];
        return makeUser(_adr, bytes(_dias), _r, _name);
    }

    // takes address , dias , and role to edit and store your user profile in user mapping
    function editUser(string memory _dias) external returns (bool) {
        string memory _name = name[msg.sender];
        return makeUser(msg.sender, bytes(_dias), 2, _name);
    }

    // shows user dias by address input
    function showUser(address _adr) external view returns (string memory) {
        return string(users[_adr]);
    }

    function showImpx(address _adr)
        external
        view
        returns (
            uint256,
            uint256,
            uint256
        )
    {
        return (impx[_adr].action, impx[_adr].connection, impx[_adr].liquidity);
    }

    function addedConnection(address _adr) external returns (uint256) {
        return ++impx[_adr].connection;
    }
}

// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK0Okdlc:;,......    ......',;cldxO0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNXX0kdc;'...        .......         ...';coxOKXNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNX0xl;'..              .,;;:,.                ..;cdOXXNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXNXOo:'.                   .......                    ..;lkKXNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNXOo;..              .........................             ..,lkKNNNNXNNNNNNNNNNNNN
//      XNNNNNNNNNNNNXXNKx:..            ..........    'lc'.    ............            .;d0XNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNX0d;.          ........         .;dddkl.            .......          .'lOXNNNNNNNNNNNNN
//      XNNNNNNNNNNX0d,.         ......             .cx:..,lo'               ......         .'lOXNNNNNNNNNNN
//      XNNNNXNNNNKx,.         .....               .ox;.   .:o,.                 ....         .'o0XNNNNNNNNN
//      XNXNNNNNXOc.        .....                .,dd'      .;l;.                  .....   .... .;xXNNNNNNNN
//      XNNNNNNKd'....... .....                 .;xo.        .'c;.                    .....':;..  .l0XNNNNNN
//      XNNNNX0c. ..'''......                  .ckc.           .:;.                     ....',...  .;OXNNNNN
//      XNNNXO:.   ........                   .ok:.             .;;.                     ......     .,xXNNXX
//      XNNXO;.       ...                    'dx;.               .,;.                      ...        'xXNNN
//      XNXO;.       ...                   .,xx'       .....''''''';:..                     ...        'xXNN
//      XN0:.       ...                   .;kd.  ..,:ldxkOOOOOOOOOkO0Odl:,..                  ...      .,kXN
//      XKl.       ...                   .cko'':ok00Okdlc;;,'''...',;:dkxkkd:..                ..       .:0N
//      Xx'       ...                   .lKOxk00xxxl,.  ....',..      .'..,cddl,.              ...       .oX
//      O:.      ...                  ..dNN0xl;':c::c:'..':odol:..     .... ..:lc,.             ...       ,k
//      d.       ..                 .,o00d:.. .od'  .,cclxxl'.'coc.     ....   ..,,'..           ..       .l
//      :.      ...              ..:xKNO,.   .lO:    .;k0o;.   .'do.     ...      .....          ...       ,
//      '       ..             ..cddx0x'     .xO,   .:dc',:;'.   ;k:.           ..,'...           ..       .
//      .       ..            .:lc,ckd.      .dKc. .cl'.  ..,'. .lO:       ..':ll:,..             ...      .
//      .      ...          .,:,..ckl.       .;0O:,:,.      ...'lOl.   ..;ldkkdo;.                ...      .
//             ...        ..'.. .lkc.         .;kK0o,.......':dOx;..,cdOKKko;..'c:.               ...
//      .      ...       ....  .lk:.           .'coxOkkxxxxkkkxdodkKXXOdc'.    .'dd,.             ...
//      .      ...        ....,dk;.            ..  ..;coxkkOO0KXX0ko:'..         'dOc.            ...      .
//      .       ..          .,dd;,,;;:::;;;;;::clloxkO0KK00Oxdl;'..               .l0d'.          ...      .
//      ,.      ...        .;dc.  ...,;:clloodddddoolc:;'....                      .;OO:.         ......   .
//      c.  .......       .:o;.                                                     .'d0d'.      ....,;'. .:
//      x'  .';,...      .cl'.                                                        .:OO:.     ....;;.. .o
//      0l. ..,'....   .'ol...............................'''',,,,,,;;;:::::ccccclllllookNXd.   ... .... .;0
//      XO,       ...  .coc::cccccccccllllllllllllloooooooooooooooooooooooooooooooolllllllc;.  ...       .dX
//      XXd.       ...  .........................................                             ...       .lKN
//      XNKl.       ...            .:cccccc:;:ccccccc:::cccccccccccccccccccccccc'.           ...       .:0NX
//      XNNKc.       ...          .cXWNXXNKkxokXNWWNNK0NMWWNXNW0OXWNNWWNWWNWWNWWo.          ...       .;OXNN
//      XNNN0l.       ....        .cXNxokKxokllOkdxKNOxXWkloddOdlOXKkK0ONWOdx0WWo.         ...       .;OXNNN
//      XNNNNKo.        ...       .cXNOdokxcddd0klo0WKdOXd;lxkKOd0NWOlokKXOllOWWo.       ...        .c0NNNNN
//      XNNNNNXd'.       ....     .cXWK00XNKO0XXKNXKWN0KNNK00KNNK0XXOdOKKXKNXKNWo.     ....        .lKNNNNNN
//      XNNNNNNXO:.        ....    'oddddddddddddddddddddddddddddddl:coddddddddo;.   ....        .,xXNNNNNNN
//      XNNNNNNNNKd'.        .....                                                 ....        ..l0XNNNNNNNN
//      XNNNNNNNNNXOl..        ......                                           .....         .:kXNNNNNNNNNN
//      XNNNNNNNNNNNXOc..         ......                                    ......          .:xKNNNNNNNNNNNN
//      XNNNNNNNNNNNNNXOl'.          ........                          ........          ..ckKNNNNNNXNNNNNNN
//      XNNNNNNNNNNNNNNNX0d;..       ..'....................................',,.       .,oOXNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXOo;..    ...;;.     ....................      .;,'..   ..,lkKXNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNKOd:'.    ..                                 ...  ..;lkKXNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNX0ko:,...                                 ..':lx0XNNNNNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNNXKOxoc;,....                  ....';:ldOKXXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNXXNNNNXK0kdl:;'.....    .....',:ldk0KXNNNNNXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              s0xiety Groups                                                                                                                            //
//      @description    ::              Group Interface Contract                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Multinet Group Interface                                                                                                           //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

import "./s0xUsers.sol";
import {s0xFriends, iii6Relations, iii6Math} from "./s0xFriends.sol";
import "../iii6Utils/Misc/Errors/iii6Errors.sol";

contract s0xGroups is iii6Math, iii6Relations, iii6Errors {
    s0xUsers private user; // user contract reference
    s0xFriends private friend; // friend contract reference
    address public owner; // owner address
    string public name; // group name
    string p;
    uint256 public m; // member count
    uint256 private c; // content count
    GroupType public mode; // 0-private (no invite), 1-bothchecked, 2-ulike, 3-likeu, 4-bothcheckedofulike, 5-public, 9-secret, 99-admin

    mapping(uint256 => address) public members; // address by id
    mapping(address => uint256) public mNum; // id by address
    mapping(address => uint256) public myContent; // content count by address
    mapping(address => mapping(uint256 => bytes)) public content; // content by address => myContent counter
    mapping(uint256 => bytes) public cntnt; // contentt by cid
    mapping(uint256 => uint256) public r; // replys by cntnt id c
    mapping(uint256 => mapping(uint256 => bytes)) public replys; // replys by cid => rply id => reply content
    mapping(address => uint256) public myRplyCount; // reply count  by useraddress
    mapping(address => mapping(uint256 => bytes)) public myReplys; // reply content by address and myrplycount
    mapping(address => bool) public invite;

    constructor(
        address _user,
        address _friend,
        bytes memory _name,
        GroupType _mode,
        address _o,
        string memory _p
    ) {
        mode = _mode;
        user = s0xUsers(_user);
        friend = s0xFriends(_friend);
        owner = _o;
        p = _p;
        name = string(_name);
        m = 1;
        _addUser(owner);
    }

    function _addUser(address _adr) internal returns (address) {
        members[m] = _adr;
        mNum[_adr] = m;
        m++;
        return _adr;
    }

    function addUser(
        address _sender,
        address _adr,
        string memory _pin
    ) external returns (address ad) {
        /**
         * @dev FACE TO FACE PRIVATE CHAT
         * if sender and receiver know another
         * and ref user is alone new user gets
         * added to face to face chat
         */
        if (mode == GroupType.FaceToFace) {
            if (m > 2) revert All_Slots_Taken();
            if (_sender != owner) revert Unauthorized();
            if (!friend.getMsgAllow(owner, _adr)) revert Not_Friends();
            ad = _addUser(_adr);
        }
        /**
         * @dev PRIVATE GROUP
         * if owner and receiver know another
         * new user gets added
         */
        else if (mode == GroupType.Private) {
            if (
                _sender != owner ||
                !friend.getMsgAllow(owner, _adr) ||
                !friend.getMsgAllow(_adr, owner)
            ) revert Unauthorized();
            // add user to group
            ad = _addUser(_adr);
        }
        /**
         * @dev Password Protected PRIVATE Group
         */
        else if (mode == GroupType.Closed) {
            if (
                !friend.getMsgAllow(_sender, _adr) ||
                !friend.getMsgAllow(_adr, _sender)
            ) revert Unauthorized();
            if (_stringEqual(_pin, p)) {
                ad = _addUser(_adr);
            } else revert Unauthorized();
        }
        /**
         * @dev Friends Invite Friends Public Group
         */
        else if (mode == GroupType.Shared || mode == GroupType.Public) {
            if (
                friend.getMsgAllow(_sender, _adr) == false ||
                friend.getMsgAllow(_adr, _sender) == false
            ) revert Unauthorized();
            ad = _addUser(_adr);
        }
        /**
         * @dev public group
         */
        else if (mode == GroupType.Open) {
            ad = _addUser(_adr);
        }
        /**
         * @dev open group
         */
        else revert Unauthorized();
    }

    function removeUser(address _sender, address _adr)
        external
        returns (address)
    {
        if (mode == GroupType.FaceToFace) revert Min_Requirements_Not_Met();
        if (_sender != owner) revert Unauthorized();
        members[mNum[_adr]] = address(0);
        mNum[_adr] = 0;
        return _adr;
    }

    function addContent(address _sender, string memory _cnt)
        external
        returns (string memory)
    {
        content[_sender][myContent[_sender]] = bytes(_cnt);
        ++myContent[_sender];
        cntnt[c] = bytes(_cnt);
        ++c;
        return _cnt;
    }

    function addReplyToContent(
        address _sender,
        string memory _rply,
        uint256 _c
    ) external returns (uint256) {
        replys[_c][r[_c]] = bytes(_rply);
        myReplys[_sender][myRplyCount[_sender]] = bytes(_rply);
        ++myRplyCount[_sender];
        return ++r[_c];
    }

    function _showContent(uint256 _contentId)
        internal
        view
        returns (string memory, string[] memory)
    {
        string[] memory repliers;
        for (uint256 i = 0; i < r[_contentId]; i++) {
            repliers[i] = string(replys[_contentId][r[_contentId]]);
        }
        return (string(cntnt[_contentId]), repliers);
    }

    function showContent(uint256 _contentId)
        external
        view
        returns (string memory, string[] memory)
    {
        return _showContent(_contentId);
    }
}

// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK0Okdlc:;,......    ......',;cldxO0KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNXX0kdc;'...        .......         ...';coxOKXNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNX0xl;'..              .,;;:,.                ..;cdOXXNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXNXOo:'.                   .......                    ..;lkKXNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNXOo;..              .........................             ..,lkKNNNNXNNNNNNNNNNNNN
//      XNNNNNNNNNNNNXXNKx:..            ..........    'lc'.    ............            .;d0XNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNX0d;.          ........         .;dddkl.            .......          .'lOXNNNNNNNNNNNNN
//      XNNNNNNNNNNX0d,.         ......             .cx:..,lo'               ......         .'lOXNNNNNNNNNNN
//      XNNNNXNNNNKx,.         .....               .ox;.   .:o,.                 ....         .'o0XNNNNNNNNN
//      XNXNNNNNXOc.        .....                .,dd'      .;l;.                  .....   .... .;xXNNNNNNNN
//      XNNNNNNKd'....... .....                 .;xo.        .'c;.                    .....':;..  .l0XNNNNNN
//      XNNNNX0c. ..'''......                  .ckc.           .:;.                     ....',...  .;OXNNNNN
//      XNNNXO:.   ........                   .ok:.             .;;.                     ......     .,xXNNXX
//      XNNXO;.       ...                    'dx;.               .,;.                      ...        'xXNNN
//      XNXO;.       ...                   .,xx'       .....''''''';:..                     ...        'xXNN
//      XN0:.       ...                   .;kd.  ..,:ldxkOOOOOOOOOkO0Odl:,..                  ...      .,kXN
//      XKl.       ...                   .cko'':ok00Okdlc;;,'''...',;:dkxkkd:..                ..       .:0N
//      Xx'       ...                   .lKOxk00xxxl,.  ....',..      .'..,cddl,.              ...       .oX
//      O:.      ...                  ..dNN0xl;':c::c:'..':odol:..     .... ..:lc,.             ...       ,k
//      d.       ..                 .,o00d:.. .od'  .,cclxxl'.'coc.     ....   ..,,'..           ..       .l
//      :.      ...              ..:xKNO,.   .lO:    .;k0o;.   .'do.     ...      .....          ...       ,
//      '       ..             ..cddx0x'     .xO,   .:dc',:;'.   ;k:.           ..,'...           ..       .
//      .       ..            .:lc,ckd.      .dKc. .cl'.  ..,'. .lO:       ..':ll:,..             ...      .
//      .      ...          .,:,..ckl.       .;0O:,:,.      ...'lOl.   ..;ldkkdo;.                ...      .
//             ...        ..'.. .lkc.         .;kK0o,.......':dOx;..,cdOKKko;..'c:.               ...
//      .      ...       ....  .lk:.           .'coxOkkxxxxkkkxdodkKXXOdc'.    .'dd,.             ...
//      .      ...        ....,dk;.            ..  ..;coxkkOO0KXX0ko:'..         'dOc.            ...      .
//      .       ..          .,dd;,,;;:::;;;;;::clloxkO0KK00Oxdl;'..               .l0d'.          ...      .
//      ,.      ...        .;dc.  ...,;:clloodddddoolc:;'....                      .;OO:.         ......   .
//      c.  .......       .:o;.                                                     .'d0d'.      ....,;'. .:
//      x'  .';,...      .cl'.                                                        .:OO:.     ....;;.. .o
//      0l. ..,'....   .'ol...............................'''',,,,,,;;;:::::ccccclllllookNXd.   ... .... .;0
//      XO,       ...  .coc::cccccccccllllllllllllloooooooooooooooooooooooooooooooolllllllc;.  ...       .dX
//      XXd.       ...  .........................................                             ...       .lKN
//      XNKl.       ...            .:cccccc:;:ccccccc:::cccccccccccccccccccccccc'.           ...       .:0NX
//      XNNKc.       ...          .cXWNXXNKkxokXNWWNNK0NMWWNXNW0OXWNNWWNWWNWWNWWo.          ...       .;OXNN
//      XNNN0l.       ....        .cXNxokKxokllOkdxKNOxXWkloddOdlOXKkK0ONWOdx0WWo.         ...       .;OXNNN
//      XNNNNKo.        ...       .cXNOdokxcddd0klo0WKdOXd;lxkKOd0NWOlokKXOllOWWo.       ...        .c0NNNNN
//      XNNNNNXd'.       ....     .cXWK00XNKO0XXKNXKWN0KNNK00KNNK0XXOdOKKXKNXKNWo.     ....        .lKNNNNNN
//      XNNNNNNXO:.        ....    'oddddddddddddddddddddddddddddddl:coddddddddo;.   ....        .,xXNNNNNNN
//      XNNNNNNNNKd'.        .....                                                 ....        ..l0XNNNNNNNN
//      XNNNNNNNNNXOl..        ......                                           .....         .:kXNNNNNNNNNN
//      XNNNNNNNNNNNXOc..         ......                                    ......          .:xKNNNNNNNNNNNN
//      XNNNNNNNNNNNNNXOl'.          ........                          ........          ..ckKNNNNNNXNNNNNNN
//      XNNNNNNNNNNNNNNNX0d;..       ..'....................................',,.       .,oOXNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNXOo;..    ...;;.     ....................      .;,'..   ..,lkKXNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNKOd:'.    ..                                 ...  ..;lkKXNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNX0ko:,...                                 ..':lx0XNNNNNXNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNNXKOxoc;,....                  ....';:ldOKXXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//      XNNNNNNNNNNNNNNNNNNNNNNNNNNNXXNNNNXK0kdl:;'.....    .....',:ldk0KXNNNNNXNNNNNNNNNNNNNNNNNNNNNNNNNNNN
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              s0xiety Users                                                                                                                            //
//      @description    ::              Friend Interface Contract                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Multinet Friendship Interface                                                                                                           //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

import "../iii6Utils/Math/iii6Math.sol";
import "../iii6Utils/Misc/iii6Relations.sol";
import "./s0xUsers.sol";

/**
 * @dev soxFriends is the s0xiety contract that takes care or friendships relations and privacy
 * it inherits iii6Math and iii6Relations
 *
 */
contract s0xFriends is iii6Math, iii6Relations {
    // importing s0x user contract struct
    s0xUsers private user;
    // following // address ref user # =>  address privacy user # => Relation Mode Struct ?
    mapping(address => mapping(address => Relations)) private relationToUser;
    mapping(address => bool) public banned;
    // count connections var
    uint256 c;
    uint256 r;
    // connections // address smaller # => address bigger # => uint c connection count
    mapping(address => mapping(address => uint256)) public connection; // connection array
    // follower count // address ref user # => uint follower counter
    mapping(address => uint256) public followerCount;
    // follower count // address ref user # => uint followed counter
    mapping(address => uint256) public myFollowingCount;
    // followers by count //address ref user # => uint follower counter
    mapping(address => mapping(uint256 => address)) public followersByCount;

    /**
     * @dev soxFriends is the s0xiety contract that takes care or friendships relations and privacy
     * @param _usrAdr is the User Contract Adress
     *
     */
    constructor(address _usrAdr) {
        user = s0xUsers(_usrAdr);
    }

    /**
     * @dev shows user account of msg sender
     */
    function showMe() external view returns (string memory) {
        return user.showUser(msg.sender);
    }

    /**
     * @dev shows user account of given address
     * @param _adr address of user account to show
     */
    function showYou(address _adr) external view returns (string memory) {
        return user.showUser(_adr);
    }

    /**
     * @dev shows user relation to msg.sender INTERNAL
     */
    function _detectRelation(uint256 _rel)
        internal
        pure
        returns (Relation rel)
    {
        if (_rel == 0) rel = Relation.Friend;
        if (_rel == 1) rel = Relation.Family;
        if (_rel == 2) rel = Relation.Work;
        if (_rel == 3) rel = Relation.Homies;
        if (_rel == 4) rel = Relation.Partners;
        if (_rel == 5) rel = Relation.Blocked;
    }

    /**
     * @dev shows user msg allowance to msg.sender
     */
    function getMsgAllow(address _sender, address _adr)
        external
        view
        returns (bool)
    {
        return relationToUser[_sender][_adr].BallowsAmsg;
    }

    /**
     * @dev create user relation from sender to adr INTERNAL
     */
    function relate(
        address _adr,
        address _sender,
        uint256 _rel
    ) external returns (uint256) {
        Relation rel = _detectRelation(_rel);
        ++myFollowingCount[_adr];
        followersByCount[_sender][followerCount[_sender]] = _adr;
        ++followerCount[_sender];
        (address s, address l) = _smaller(_adr, _sender);
        // if no connection for this user pair exists
        if (connection[s][l] == 0) {
            ++c;
            connection[s][l] = c;
            relationToUser[_sender][_adr] = Relations(
                r,
                true,
                false,
                false,
                false,
                true,
                false,
                rel,
                Relation.Member
            );
            ++r;
            user.addedConnection(_sender);
            relationToUser[_adr][_sender] = Relations(
                r,
                false,
                true,
                false,
                false,
                false,
                true,
                Relation.Member,
                rel
            );
            ++r;
            return (connection[s][l]);
        }
        // if one sided  connection for this user pair exists
        else if (connection[s][l] == 1) {
            ++c;
            if (relationToUser[_sender][_adr].AprivB == Relation.Member) {
                connection[s][l] = c;
                Relations memory oldRel;
                oldRel = relationToUser[_sender][_adr];
                relationToUser[_sender][_adr] = Relations(
                    r,
                    true,
                    oldRel.BfollowsA,
                    false,
                    oldRel.BbansA,
                    true,
                    oldRel.BallowsAmsg,
                    rel,
                    oldRel.BprivA
                );
                ++r;
                user.addedConnection(_sender);
                relationToUser[_adr][_sender] = Relations(
                    r,
                    oldRel.BfollowsA,
                    true,
                    oldRel.BbansA,
                    false,
                    oldRel.BallowsAmsg,
                    true,
                    oldRel.BprivA,
                    rel
                );
                ++r;
            }
            return (connection[s][l]);
        }
        // if users are two way connected
        else return (connection[s][l]);
    }

    /**
     * @dev count followers of address
     */
    function doFollowerCount(address _adr) external view returns (uint256) {
        return followerCount[_adr];
    }

    /**
     * @dev count how many users address follows
     * @param _adr address of user
     */
    function doFollowingCount(address _adr) external view returns (uint256) {
        return myFollowingCount[_adr];
    }

    /**
     * @dev shows one specific Followers address
     * @param _adr address of user
     * @param _c follower count pointer of user _adr
     */
    function doShowFollower(address _adr, uint256 _c)
        external
        view
        returns (address)
    {
        return followersByCount[_adr][_c];
    }

    /**
     * @dev shows relation fom msg.sender to _adr
     * @param _adr address of user
     * @return rel Relations struct
     */
    function showRelation(address _adr)
        external
        view
        returns (Relations memory rel)
    {
        rel = relationToUser[msg.sender][_adr];
    }

    /**
     * @dev edits one specific Followers address relation status a = msg.sender b = _adr
     * @param _adr address of user
     * @param _fol bool follower
     * @param _msg bool can a msg b
     * @param _ban bool did a ban b
     * @param _rel uint relation gets converted to Relaion enum by _detectRelation()
     */
    function editRelation(
        address _adr,
        bool _fol,
        bool _msg,
        bool _ban,
        uint256 _rel
    ) external returns (Relations memory) {
        return _editRelation(_adr, _fol, _msg, _ban, _rel);
    }

    /**
     * @dev edits one specific Followers address relation status
     * a = msg.sender b = _adr INTERNAL
     * @param _adr address of reciever
     * @param _fol bool a follows b
     * @param _msg bool a allows msgs b
     * @param _ban bool a bans b
     * @param _rel Relation in /iii6Utils/Misc/iii6Relations.sol Relation enum
     * @return rel
     */
    function _editRelation(
        address _adr,
        bool _fol,
        bool _msg,
        bool _ban,
        uint256 _rel
    ) internal returns (Relations memory rel) {
        Relation newRel = _detectRelation(_rel);
        Relations memory hold1 = relationToUser[msg.sender][_adr];
        Relations memory hold2 = relationToUser[_adr][msg.sender];

        /**
         * Relations Struct Scheme
         *
         * @param uint256 id;
         * @param bool AfollowsB;
         * @param bool BfollowsA;
         * @param bool AbansB;
         * @param bool BbansA;
         * @param bool AallowsBmsg;
         * @param bool BallowsAmsg;
         * @param Relation AprivB;
         * @param Relation BprivA;
         */
        Relations memory relOut = Relations(
            hold1.id,
            _fol,
            hold1.BfollowsA,
            _ban,
            hold1.BbansA,
            _msg,
            hold1.BallowsAmsg,
            newRel,
            hold1.BprivA
        );
        Relations memory relIn = Relations(
            hold2.id,
            hold2.AfollowsB,
            _fol,
            hold2.AbansB,
            _ban,
            hold2.AallowsBmsg,
            _msg,
            hold2.AprivB,
            newRel
        );
        relationToUser[msg.sender][_adr] = relOut;
        relationToUser[_adr][msg.sender] = relIn;
        rel = relOut;
    }

    function blockAddress(address _adr) external returns (Relations memory) {
        return _editRelation(_adr, false, false, true, 5);
    }
}

// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      MMWKd:..                                                                                    ..:dKWMM
//      MKl.                                                                                            .lKW
//      O'       ..''''''''''''.     .''''''.     .'''''.      .''''''''''''''.     .''''''''''''..       'O
//      '     .ckKNNWNWWWWWWWWWk.   .xNWWNWNl    ,0WWWWW0,     lNWWWWWWWWWNWNk'    ;0NNNWWWWWWWWNNKkc.     '
//           ,OWMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMWO,
//          .kMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMMMMk.
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMM0,    ;0NNWWMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMM0,     .'.',;lkNMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMK;              ,kWMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMX:    .:oxxdc'    .dWMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   ,OWMMMMMXl.   '0MMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMX;   .kMMMMMMMMK,   .xMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMM0'   .OMMMMMMMMX;   .xMMMMMMMMMMMM0'
//          .OMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMK,    lNMMMMMMWx.   '0MMMMMMMMMMMMO.
//           lNMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   .:x0KKKkc.   .dWMMMMMMMMMMMNl
//      .    .c0WMMMMMMMMMMMMMMO.   .kMMMMMWo    ,KMMMMMK,     lWMMMMNd.     ....     .xNMMMMMMMMMMW0c.    .
//      l      .,lddxxxxxxxxxxxc.    :xxxxxd,    .lxxxxxl.     ,dxxxxxd:.            .cdxxxxxxxxddl,.      l
//      No.                                                                                              .oN
//      MW0l'                                                                                          'l0WM
//      MMMWKd;.                                                                                    .;dKWMMM
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              iii6 Global Enums                                                                                                                           //
//      @description    ::              Global Enum Library                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Enum Library                                                                                                          //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

contract iii6Relations {
    // ██╗███╗░░██╗██╗████████╗██╗░█████╗░██╗░░░░░██╗░██████╗░█████╗░████████╗██╗░█████╗░███╗░░██╗
    // ██║████╗░██║██║╚══██╔══╝██║██╔══██╗██║░░░░░██║██╔════╝██╔══██╗╚══██╔══╝██║██╔══██╗████╗░██║
    // ██║██╔██╗██║██║░░░██║░░░██║███████║██║░░░░░██║╚█████╗░███████║░░░██║░░░██║██║░░██║██╔██╗██║
    // ██║██║╚████║██║░░░██║░░░██║██╔══██║██║░░░░░██║░╚═══██╗██╔══██║░░░██║░░░██║██║░░██║██║╚████║
    // ██║██║░╚███║██║░░░██║░░░██║██║░░██║███████╗██║██████╔╝██║░░██║░░░██║░░░██║╚█████╔╝██║░╚███║
    // ╚═╝╚═╝░░╚══╝╚═╝░░░╚═╝░░░╚═╝╚═╝░░╚═╝╚══════╝╚═╝╚═════╝░╚═╝░░╚═╝░░░╚═╝░░░╚═╝░╚════╝░╚═╝░░╚══╝
    /*
     * @dev Divides between two values substracting the remainder from the dividend
     * @param _a First value
     * @param _b Second value
     * @return Result of division
     */
    // role enum
    enum Roles {
        Unknown,
        Foreign,
        Known,
        Member,
        Advertiser,
        Creator,
        Moderator,
        Admin
    }
    /**
     * @dev explanation of group types
     * @param Face To Face is for 2 users only private invisible and encrypted
     * @param Private is a invisible private group for multiple users
     * @param Closed is a invisible group with password access
     * @param Shared is a Private Group Friends can Invite other Friends into
     * @param Public is a publicly visible group every user can apply for
     * @param Open groups are visible and accessible by everyone
     */
    enum GroupType {
        FaceToFace,
        Private,
        Closed,
        Shared,
        Public,
        Open
    }
    /**
     * @dev explanation of group types
     * @param Member known wallet address with profile data with no relation to ref user
     * @param FriendsFriend member with a relation to at least one of ref users friends
     * @param Friend member privacy status that allows basic access it is the default friendship state
     * @param Family member biologically or emotionally related
     * @param Work member related through work or profession
     * @param Homies member that is a close private friend
     * @param Partners member that user trusts 100% and can recover user account
     * @param Blocked member that is removed from user feed for ref user and vice versa
     */
    enum Relation {
        Member,
        FriendsFriend,
        Friend,
        Family,
        Work,
        Homies,
        Partners,
        Blocked,
        Banned
    }
    struct Relations {
        uint256 id;
        bool AfollowsB;
        bool BfollowsA;
        bool AbansB;
        bool BbansA;
        bool AallowsBmsg;
        bool BallowsAmsg;
        Relation AprivB;
        Relation BprivA;
    }
    struct BoardMember {
        uint256 b_id;
        address adr;
        uint256 share;
        string info;
    }
}
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      MMWKd:..                                                                                    ..:dKWMM
//      MKl.                                                                                            .lKW
//      O'       ..''''''''''''.     .''''''.     .'''''.      .''''''''''''''.     .''''''''''''..       'O
//      '     .ckKNNWNWWWWWWWWWk.   .xNWWNWNl    ,0WWWWW0,     lNWWWWWWWWWNWNk'    ;0NNNWWWWWWWWNNKkc.     '
//           ,OWMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMWO,
//          .kMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMMMMk.
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMM0,    ;0NNWWMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMM0,     .'.',;lkNMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMK;              ,kWMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMX:    .:oxxdc'    .dWMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   ,OWMMMMMXl.   '0MMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMX;   .kMMMMMMMMK,   .xMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMM0'   .OMMMMMMMMX;   .xMMMMMMMMMMMM0'
//          .OMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMK,    lNMMMMMMWx.   '0MMMMMMMMMMMMO.
//           lNMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   .:x0KKKkc.   .dWMMMMMMMMMMMNl
//      .    .c0WMMMMMMMMMMMMMMO.   .kMMMMMWo    ,KMMMMMK,     lWMMMMNd.     ....     .xNMMMMMMMMMMW0c.    .
//      l      .,lddxxxxxxxxxxxc.    :xxxxxd,    .lxxxxxl.     ,dxxxxxd:.            .cdxxxxxxxxddl,.      l
//      No.                                                                                              .oN
//      MW0l'                                                                                          'l0WM
//      MMMWKd;.                                                                                    .;dKWMMM
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      MMWKd:..                                                                                    ..:dKWMM
//      MKl.                                                                                            .lKW
//      O'       ..''''''''''''.     .''''''.     .'''''.      .''''''''''''''.     .''''''''''''..       'O
//      '     .ckKNNWNWWWWWWWWWk.   .xNWWNWNl    ,0WWWWW0,     lNWWWWWWWWWNWNk'    ;0NNNWWWWWWWWNNKkc.     '
//           ,OWMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMWO,
//          .kMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMMMMk.
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMM0,    ;0NNWWMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMM0,     .'.',;lkNMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMK;              ,kWMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMX:    .:oxxdc'    .dWMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   ,OWMMMMMXl.   '0MMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMX;   .kMMMMMMMMK,   .xMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMM0'   .OMMMMMMMMX;   .xMMMMMMMMMMMM0'
//          .OMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMK,    lNMMMMMMWx.   '0MMMMMMMMMMMMO.
//           lNMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   .:x0KKKkc.   .dWMMMMMMMMMMMNl
//      .    .c0WMMMMMMMMMMMMMMO.   .kMMMMMWo    ,KMMMMMK,     lWMMMMNd.     ....     .xNMMMMMMMMMMW0c.    .
//      l      .,lddxxxxxxxxxxxc.    :xxxxxd,    .lxxxxxl.     ,dxxxxxd:.            .cdxxxxxxxxddl,.      l
//      No.                                                                                              .oN
//      MW0l'                                                                                          'l0WM
//      MMMWKd;.                                                                                    .;dKWMMM
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              iii6 Global Enums                                                                                                                           //
//      @description    ::              Global Enum Library                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Enum Library                                                                                                          //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

abstract contract iii6Errors {
    error Already_Listed();
    error All_Slots_Taken();
    error Insufficient_Balance();
    error Insufficient_MLQ();
    error Insufficient_Funds();
    error Insufficient_Amount();
    error Invalid_Amount();
    error Min_Requirements_Not_Met();
    error Mint_Is_Not_Yet_Live();
    error Mint_In_Progress();
    error Max_Tokens_Minted();
    error Greenlist_Expired();
    error Insufficient_Supply();
    error Not_Greenlisted();
    error Sold_Out();
    error Event_Has_Ended();
    error Unauthorized();
    error You_Need_To_Wait();
    error You_Are_Not_The_Holder();
    error Array_Length_Mismatch();
    error Invalid_Response();
    error Not_Burnable();
    error Not_Pausable();
    error Not_Friends();
    error Not_Friends_Rev();
}

// SPDX-License-Identifier: GPL-3.0
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      MMWKd:..                                                                                    ..:dKWMM
//      MKl.                                                                                            .lKW
//      O'       ..''''''''''''.     .''''''.     .'''''.      .''''''''''''''.     .''''''''''''..       'O
//      '     .ckKNNWNWWWWWWWWWk.   .xNWWNWNl    ,0WWWWW0,     lNWWWWWWWWWNWNk'    ;0NNNWWWWWWWWNNKkc.     '
//           ,OWMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMWO,
//          .kMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMMMMk.
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMM0,    ;0NNWWMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMM0,     .'.',;lkNMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMK;              ,kWMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMX:    .:oxxdc'    .dWMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   ,OWMMMMMXl.   '0MMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMX;   .kMMMMMMMMK,   .xMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMM0'   .OMMMMMMMMX;   .xMMMMMMMMMMMM0'
//          .OMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMK,    lNMMMMMMWx.   '0MMMMMMMMMMMMO.
//           lNMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   .:x0KKKkc.   .dWMMMMMMMMMMMNl
//      .    .c0WMMMMMMMMMMMMMMO.   .kMMMMMWo    ,KMMMMMK,     lWMMMMNd.     ....     .xNMMMMMMMMMMW0c.    .
//      l      .,lddxxxxxxxxxxxc.    :xxxxxd,    .lxxxxxl.     ,dxxxxxd:.            .cdxxxxxxxxddl,.      l
//      No.                                                                                              .oN
//      MW0l'                                                                                          'l0WM
//      MMMWKd;.                                                                                    .;dKWMMM
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Aron Mauritala Ayuk                                                                                                                                          //
//      @msg            ::              [email protected]                                                                                                                                   //
//      @github         ::              @stereoIII6
//      @twitter        ::              @stereoIII6                                                                                                                                              //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @dev            ::              Juan Xavier Valverde                                                                                                                                    //
//      @msg            ::              [email protected]                                                                                                                               //
//      @twitter        ::              @JuanXavier                                                                                                                                             //
//      @github         ::              @JuanXavier                                                                                                                                             //
//                                                                                                                                                                                  //                                                                                                                                                                                 //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//                                                                                                                                                                                  //
//      @company        ::              Fractio Holding                                                                                                                                                                       //
//      @title          ::              iii6 Math Functions                                                                                                                            //
//      @description    ::              Asset Safes Contract                                                                                                                           //
//      @version        ::              0.0.1                                                                                                                                       //
//      @purpose        ::              Math Function Library                                                                                                          //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
//                                                                                                                                                                                  //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   //
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

pragma solidity ^0.8.7;

/**
 * @dev Math helper functions
 */
contract iii6Math {
    // ██████╗░██████╗░██╗██╗░░░██╗░█████╗░████████╗███████╗  ███████╗███╗░░██╗██╗░░██╗
    // ██╔══██╗██╔══██╗██║██║░░░██║██╔══██╗╚══██╔══╝██╔════╝  ██╔════╝████╗░██║╚██╗██╔╝
    // ██████╔╝██████╔╝██║╚██╗░██╔╝███████║░░░██║░░░█████╗░░  █████╗░░██╔██╗██║░╚███╔╝░
    // ██╔═══╝░██╔══██╗██║░╚████╔╝░██╔══██║░░░██║░░░██╔══╝░░  ██╔══╝░░██║╚████║░██╔██╗░
    // ██║░░░░░██║░░██║██║░░╚██╔╝░░██║░░██║░░░██║░░░███████╗  ██║░░░░░██║░╚███║██╔╝╚██╗
    // ╚═╝░░░░░╚═╝░░╚═╝╚═╝░░░╚═╝░░░╚═╝░░╚═╝░░░╚═╝░░░╚══════╝  ╚═╝░░░░░╚═╝░░╚══╝╚═╝░░╚═╝
    /**
     * @dev Divides between two values substracting the remainder from the dividend
     * @param _a First value
     * @param _b Second value
     * @return Result of division
     */
    function _divide(uint256 _a, uint256 _b) internal pure returns (uint256) {
        uint256 rem = _a % _b;
        return ((_a - rem) / _b);
    }

    /**
     * @dev Gives back digit sum of given uint
     * @param _x First value
     * @return Result digit sum of x
     */
    function _dsum(uint256 _x) internal pure returns (uint256) {
        return (_x % 9);
    }

    /**
     * @dev takes a number gives back amount of digits
     * @param _a uint value
     * @return Result amount of digits
     */
    function _length(uint256 _a) internal pure returns (uint256) {
        uint256 a = 1;
        for (uint256 i = 1; _a / i > 0; i *= 10) {
            a++;
        }
        return a;
    }

    /**
     * @dev takes two numbers and gives back magnitude dif a = x^4 b = x^8 result = 4
     * in other words how many digits of a - how many digits of b
     * @param _a First value
     * @param _b First value
     * @return Result digit sum of x
     */
    function _magnitudeCheck(uint256 _a, uint256 _b)
        internal
        pure
        returns (uint256)
    {
        uint256 a = _length(_a);
        uint256 b = _length(_b);
        if (a > b) {
            return a - b;
        } else {
            return b - a;
        }
    }

    /**
     * @dev Generates unique ID with keccak256 cryptography out of a string
     * @param _inf String value to encrypt
     * @return Decimal representation of encrypted string
     */
    function _uniqID(string memory _inf) internal pure returns (uint256) {
        return uint256(keccak256(abi.encode(_inf)));
    }

    /**
     * @dev Returns the smaller value between two addresses
     * @param _a First value
     * @param _b Second value
     * @return s Smaller address value
     * @return l Larger address value
     */
    function _smaller(address _a, address _b)
        internal
        pure
        returns (address s, address l)
    {
        (_a < _b) ? (s = _a, l = _b) : (s = _b, l = _a);
    }

    function _stringEqual(string memory _a, string memory _b)
        internal
        pure
        returns (bool)
    {
        return
            keccak256(abi.encodePacked(_a)) == keccak256(abi.encodePacked(_b));
    }
}
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //
//
//      MMWKd:..                                                                                    ..:dKWMM
//      MKl.                                                                                            .lKW
//      O'       ..''''''''''''.     .''''''.     .'''''.      .''''''''''''''.     .''''''''''''..       'O
//      '     .ckKNNWNWWWWWWWWWk.   .xNWWNWNl    ,0WWWWW0,     lNWWWWWWWWWNWNk'    ;0NNNWWWWWWWWNNKkc.     '
//           ,OWMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMWO,
//          .kMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMMM0,    ;KMMMMMMMMMMMMMMMMMMMk.
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMMM0,    :KMMMMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMMM0,    ;0NNWWMMMMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMM0,     .'.',;lkNMMMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMMK;              ,kWMMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMMX:    .:oxxdc'    .dWMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   ,OWMMMMMXl.   '0MMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMX;   .kMMMMMMMMK,   .xMMMMMMMMMMMM0'
//          '0MMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMM0'   .OMMMMMMMMX;   .xMMMMMMMMMMMM0'
//          .OMMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMK,    lNMMMMMMWx.   '0MMMMMMMMMMMMO.
//           lNMMMMMMMMMMMMMMMMO.   .kMMMMMWl    ,KMMMMMK,     lWMMMWd.   .:x0KKKkc.   .dWMMMMMMMMMMMNl
//      .    .c0WMMMMMMMMMMMMMMO.   .kMMMMMWo    ,KMMMMMK,     lWMMMMNd.     ....     .xNMMMMMMMMMMW0c.    .
//      l      .,lddxxxxxxxxxxxc.    :xxxxxd,    .lxxxxxl.     ,dxxxxxd:.            .cdxxxxxxxxddl,.      l
//      No.                                                                                              .oN
//      MW0l'                                                                                          'l0WM
//      MMMWKd;.                                                                                    .;dKWMMM
//
// // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // // //